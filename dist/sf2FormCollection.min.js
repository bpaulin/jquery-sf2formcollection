/*
 *  sf2FormCollection - v0.2.0
 *  sf2FormCollection
 *  https://github.com/bpaulin/jquery-sf2formcollection
 *
 *  Made by Bruno Paulin
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init(),this.sf2FormCollection()}var c="sf2FormCollection",d={addItem:'<a href="#">Add an item</a>',removeItem:"",tokenIndex:"__NAME__",sortable:!1,sortItem:'<a href="#">Sort</a>'};b.prototype={init:function(){console.log("sf2FormCollection")},sf2FormCollection:function(){var b=this,c=a(this.element),d=a('<div class="sf2fc-add"></div>'),e=a(this.settings.addItem),f=a('<div class="sf2fc-items"></div>');return c.children("*").each(function(){item=a('<div class="sf2fc-item"></div>'),a(this).detach().appendTo(item),item.appendTo(f)}),f.appendTo(c),c.data("index",f.contents().length),e.attr("id","sf2fc-add"),e.appendTo(d),d.appendTo(a(this.element)),d.on("click",function(d){d.preventDefault();var e=c.data("prototype"),f=c.data("index"),g=new RegExp(b.settings.tokenIndex,"g");e=e.replace(g,f),item=a('<div class="sf2fc-item"></div>'),item.append(e),link=a(b.settings.removeItem),link.addClass("sf2fc-remove"),link.click(function(){a(this).parent().remove()}),item.append(link),b.settings.sortable&&(link=a(b.settings.sortItem),link.addClass("sf2fc-sort"),item.prepend(link)),c.find(".sf2fc-items").append(item),c.data("index",f+1)}),""!==this.settings.removeItem&&c.find(".sf2fc-items").children("*").each(function(){link=a(b.settings.removeItem),link.addClass("sf2fc-remove"),a(this).append(link),link.click(function(){a(this).parent().remove()})}),this.settings.sortable&&(c.find(".sf2fc-items").sortable({cursor:"move",handle:".sf2fc-sort"}),c.find(".sf2fc-items").children("*").each(function(){link=a(b.settings.sortItem),link.addClass("sf2fc-sort"),a(this).prepend(link)})),a(this)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);